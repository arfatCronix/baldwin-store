{"version":3,"file":"theme-bundle.chunk.942.js","mappings":"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","sources":["webpack://bigcommerce-cornerstone/./assets/js/theme/product/video-gallery.js","webpack://bigcommerce-cornerstone/./assets/js/theme/product.js"],"sourcesContent":["export class VideoGallery {\r\n    constructor($element) {\r\n        this.$player = $element.find('[data-video-player]');\r\n        this.$videos = $element.find('[data-video-item]');\r\n        this.currentVideo = {};\r\n        this.bindEvents();\r\n    }\r\n\r\n    selectNewVideo(e) {\r\n        e.preventDefault();\r\n\r\n        const $target = $(e.currentTarget);\r\n\r\n        this.currentVideo = {\r\n            id: $target.data('videoId'),\r\n            $selectedThumb: $target,\r\n        };\r\n\r\n        this.setMainVideo();\r\n        this.setActiveThumb();\r\n    }\r\n\r\n    setMainVideo() {\r\n        this.$player.attr('src', `//www.youtube.com/embed/${this.currentVideo.id}`);\r\n    }\r\n\r\n    setActiveThumb() {\r\n        this.$videos.removeClass('is-active');\r\n        this.currentVideo.$selectedThumb.addClass('is-active');\r\n    }\r\n\r\n    bindEvents() {\r\n        this.$videos.on('click', this.selectNewVideo.bind(this));\r\n    }\r\n}\r\n\r\nexport default function videoGallery() {\r\n    const pluginKey = 'video-gallery';\r\n    const $videoGallery = $(`[data-${pluginKey}]`);\r\n\r\n    $videoGallery.each((index, element) => {\r\n        const $el = $(element);\r\n        const isInitialized = $el.data(pluginKey) instanceof VideoGallery;\r\n\r\n        if (isInitialized) {\r\n            return;\r\n        }\r\n\r\n        $el.data(pluginKey, new VideoGallery($el));\r\n    });\r\n}\r\n","/*\r\n Import all product specific js\r\n */\r\nimport PageManager from './page-manager';\r\nimport Review from './product/reviews';\r\nimport collapsibleFactory from './common/collapsible';\r\nimport ProductDetails from './common/product-details';\r\nimport videoGallery from './product/video-gallery';\r\nimport { classifyForm } from './common/utils/form-utils';\r\nimport modalFactory from './global/modal';\r\n\r\nexport default class Product extends PageManager {\r\n    constructor(context) {\r\n        super(context);\r\n        this.url = window.location.href;\r\n        this.$reviewLink = $('[data-reveal-id=\"modal-review-form\"]');\r\n        this.$bulkPricingLink = $('[data-reveal-id=\"modal-bulk-pricing\"]');\r\n        this.reviewModal = modalFactory('#modal-review-form')[0];\r\n    }\r\n\r\n    onReady() {\r\n        // Listen for foundation modal close events to sanitize URL after review.\r\n        $(document).on('close.fndtn.reveal', () => {\r\n            if (this.url.indexOf('#write_review') !== -1 && typeof window.history.replaceState === 'function') {\r\n                window.history.replaceState(null, document.title, window.location.pathname);\r\n            }\r\n        });\r\n\r\n        let validator;\r\n\r\n        // Init collapsible\r\n        collapsibleFactory();\r\n\r\n        this.productDetails = new ProductDetails($('.productView'), this.context, window.BCData.product_attributes);\r\n        this.productDetails.setProductVariant();\r\n\r\n        videoGallery();\r\n\r\n        this.bulkPricingHandler();\r\n\r\n        const $reviewForm = classifyForm('.writeReview-form');\r\n\r\n        if ($reviewForm.length === 0) return;\r\n\r\n        const review = new Review({ $reviewForm });\r\n\r\n        $('body').on('click', '[data-reveal-id=\"modal-review-form\"]', () => {\r\n            validator = review.registerValidation(this.context);\r\n            this.ariaDescribeReviewInputs($reviewForm);\r\n        });\r\n\r\n        $reviewForm.on('submit', () => {\r\n            if (validator) {\r\n                validator.performCheck();\r\n                return validator.areAll('valid');\r\n            }\r\n\r\n            return false;\r\n        });\r\n\r\n        this.productReviewHandler();\r\n    }\r\n\r\n    ariaDescribeReviewInputs($form) {\r\n        $form.find('[data-input]').each((_, input) => {\r\n            const $input = $(input);\r\n            const msgSpanId = `${$input.attr('name')}-msg`;\r\n\r\n            $input.siblings('span').attr('id', msgSpanId);\r\n            $input.attr('aria-describedby', msgSpanId);\r\n        });\r\n    }\r\n\r\n    productReviewHandler() {\r\n        if (this.url.indexOf('#write_review') !== -1) {\r\n            this.$reviewLink.trigger('click');\r\n        }\r\n    }\r\n\r\n    bulkPricingHandler() {\r\n        if (this.url.indexOf('#bulk_pricing') !== -1) {\r\n            this.$bulkPricingLink.trigger('click');\r\n        }\r\n    }\r\n}\r\n"],"names":["VideoGallery","$element","this","$player","find","$videos","currentVideo","bindEvents","_proto","prototype","selectNewVideo","e","preventDefault","$target","$","currentTarget","id","data","$selectedThumb","setMainVideo","setActiveThumb","attr","removeClass","addClass","on","bind","Product","_PageManager","context","_this","call","url","window","location","href","$reviewLink","$bulkPricingLink","reviewModal","modalFactory","onReady","validator","pluginKey","_this2","document","indexOf","history","replaceState","title","pathname","collapsibleFactory","productDetails","ProductDetails","BCData","product_attributes","setProductVariant","each","index","element","$el","bulkPricingHandler","$reviewForm","classifyForm","length","review","Review","registerValidation","ariaDescribeReviewInputs","performCheck","areAll","productReviewHandler","$form","_","input","$input","msgSpanId","siblings","trigger","PageManager"],"sourceRoot":""}